<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gandalf Password Game</title>
    <link rel="icon" type="image/jpeg" href="/static/g.jpg">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .bg-image {
            background-image: url('/static/bg.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-color: rgba(0, 0, 0, 0.65); /* Add a semi-transparent black overlay */
            background-blend-mode: darken; /* Blend the overlay with the background image */
        }
        .gandalf-green { background-color: rgba(2, 36, 1, 0.767); }
        .gandalf-white { background-color: rgba(1, 48, 11, 0.2); color: #F0F0F0; }
        .gandalf-blue { background-color: rgba(1, 43, 12, 0.2); color: #F0F0F0; }
        .gandalf-text { color: #F0F0F0; }
        .gandalf-accent { background-color: rgb(193, 154, 107); }
        .gandalf-accent:hover { background-color: rgb(95, 58, 12); }
        .password-section { background-color: rgba(2, 36, 1, 0.767); }
    
    </style>
</head>
<body class="bg-image min-h-screen flex flex-col">
    <div class="container mx-auto flex flex-col h-screen p-4">
        <!-- Top section: Header -->
        <div class="gandalf-blue p-4 flex items-center rounded-t-lg">
            <img src="/static/ganda.jpg" alt="Gandalf" class="w-12 h-12 rounded-full border-2 border-white mr-4">
            <h1 class="text-2xl font-bold text-white">Gandalf Password Extractor </h1>
        </div>

        <!-- Main section: Game Description, Chat, and Password Submission -->
        <div class="flex-grow flex flex-col gandalf-white shadow-md overflow-hidden rounded-b-lg">
            <!-- Game Description -->
            <div class="w-full p-6 gandalf-green relative">
                <img src="/static/ho.jpg" alt="Gandalf" class="float-right ml-4 mb-4 w-32 h-auto rounded-lg shadow-lg">
                <h2 class="text-xl font-semibold mb-4 text-white">Game Description</h2>
                <div id="gameDescription" class="text-white">{{ description | safe }}</div>
            </div>

            <div class="flex-grow flex flex-col md:flex-row">
                <!-- Left side: Chat with Gandalf -->
                <div class="w-full md:w-2/3 p-4 flex flex-col">
                    <div class="flex-grow overflow-y-auto mb-4 gandalf-text">
                        <div class="flex items-start mb-4">
                            <img src="/static/uh.jpg" alt="Gandalf" class="w-12 h-12 rounded-full mr-5">
                            <div>
                                <p class="font-bold">Gandalf:</p>
                                <p>{{ defender_description }}</p>
                            </div>`
                        </div>
                        {% if gandalf_response %}
                        <div class="flex items-start mb-4 justify-end">
                            <div class="text-right">
                                <p class="font-bold">You:</p>
                                <p>{{ message }}</p>
                            </div>
                        </div>
                        <div class="flex items-start mb-4">
                            <img src="/static/you-shall-not-pass.gif" alt="Gandalf" class="w-12 h-12 rounded-full mr-5">
                            <div>
                                <p class="font-bold">Gandalf:</p>
                                <p>{{ gandalf_response }}</p>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    <form method="post" class="mt-auto">
                        <div class="flex">
                            <input type="text" id="message" name="message" class="flex-grow gandalf-green text-white border-green-900 rounded-l-md focus:border-green-900 focus:ring-green-90 text-lg py-3 px-4" placeholder="Try to trick the LLM to give you password...">
                            <button type="submit" name="send_message" class="gandalf-accent text-white px-4 py-2 rounded-r-md transition-colors">Send</button>
                        </div>
                    </form>
                </div>
                
                <!-- Right side: Password submission -->
                <div class="w-full md:w-1/3 p-4 border-l border-green-900 password-section">
                    <h2 class="text-xl font-semibold mb-4 gandalf-text flex justify-between items-center">
                        Enter the password
                        <span class="gandalf-accent text-white text-xs font-semibold px-2.5 py-0.5 rounded-full">Level {{ level }}</span>
                    </h2>
                    <form method="post" class="space-y-4">
                        <div>
                            <input type="text" id="password" name="password" class="w-full gandalf-green text-white border-green-900 rounded-md shadow-sm focus:border-green-900 focus:ring-green-900 text-lg py-3 px-4" placeholder="Did you manage to guess the password ?">
                        </div>
                        <button type="submit" name="submit_password" class="gandalf-accent text-white px-4 py-2 rounded-md w-full transition-colors">Submit Password</button>
                    </form>
                    {% if success == True %}
                    <p class="text-green-900 font-bold mt-4">Congratulations! You guessed the password correctly.</p>
                    {% elif success == False %}
                    <p class="text-red-400 font-bold mt-4">Incorrect password. Please try again.</p>
                    {% endif %}
                
                </div>
            </div>
        </div>
    </div>
</body>
</html>
</html>